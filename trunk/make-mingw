#CC		= gcc
CC		= i586-mingw32msvc-gcc
CFLAGS		= -Wall -g -O -DMINGW32 -Ilibusb-win32
LDFLAGS		= -s
LIBS		= -Llibusb-win32 -lusb

OBJS		= mcprog.o target.o conf.o
OBJS		+= adapter-usb.o
OBJS		+= adapter-lpt.o
OBJS		+= adapter-bitbang.o


all:		mcprog.exe

mcprog.exe:	$(OBJS) mcprog.o
		$(CC) $(LDFLAGS) -o $@ $(OBJS) $(LIBS)

###
adapter-bitbang.o: adapter-bitbang.c adapter.h oncd.h
adapter-lpt.o: adapter-lpt.c adapter.h oncd.h
adapter-usb.o: adapter-usb.c adapter.h oncd.h
conf.o: conf.c conf.h
mcprog.o: mcprog.c target.h conf.h
target.o: target.c target.h adapter.h oncd.h
